"0","# 2004"
"0","# Visualize gtrends by party over time for each year"
"0","rects = tibble(start = ymd('2004-08-08'), "
"0","                end = ymd('2004-08-29'),"
"0","                y1 = -Inf,"
"0","                y2 = Inf)"
"0","texts = tibble(x = c(ymd('2004-07-04'), ymd('2004-08-29'), "
"0","                     ymd('2004-11-02'),ymd('2004-05-01'),"
"0","                    ymd('2004-8-30'), ymd('2004-7-26'),"
"0","                    ymd('2004-01-19'), ymd('2004-01-27'),"
"0","                    ymd('2004-03-02')),"
"0","                lab = c(""July 4th"", ""Olympics"", "
"0","                        ""General election"", ""Primaries"", "
"0","                        ""R Convention"", ""D Convention"","
"0","                       ""IA"", ""NH"", ""Super Tuesday""),"
"0","                hjust = c(1, 1, 1, 1, 1,1,2,3, 1.25),"
"0","               vjust = c(0,-1,1, 1,1,0,0,1, 0),"
"0","               angle = c(90,90,90,0,90,90, 90, 90, 90)"
"0","              )"
"0","vlines = tibble(xint = c(ymd('2004-07-04'), ymd('2004-11-02'), "
"0","                         ymd('2004-8-30'), ymd('2004-7-26'))"
"0","               )"
"0","chart04<-"
"0","ggplot() +"
"0","  geom_line(data = gtrends_party_salience_04, aes(x = ymd(date), y = dem_salience), color=4) +"
"0","  geom_line(data = gtrends_party_salience_04, aes(x = ymd(date), y = rep_salience), color=2) +"
"0","  geom_rect(data = rects, aes(xmin = start, xmax=end, ymin=-Inf, ymax=Inf), "
"0","            fill=""grey80"", alpha=0.5) +"
"0","  geom_vline(data = vlines, aes(xintercept = as.numeric(xint)), color = ""grey80"", size=1.5, alpha=0.5) +"
"0","  geom_vline(data = prim_04_clean, aes(xintercept = as.numeric(mdy(prim_04_clean$date))), color = ""grey60"", size=1.5, alpha=0.25) +"
"0","  geom_text(data=texts, aes(x = x, y=Inf, label = lab, hjust=hjust, vjust=vjust, angle=angle), "
"0","            size=3, alpha=0.7, color=""black"") +"
"0","  theme_minimal() +"
"0","  theme(panel.background = element_rect(fill = ""white"", colour = ""grey90"")) +"
"0","  theme_ipsum_rc(grid=""XY"") +"
"0","  theme(axis.text.x=element_text(hjust=c(0, 0.5, 0.5, 0.5, 0.5, 0.5)),"
"0","       legend.title = element_blank(),"
"0","       legend.position=""bottom"") +"
"0","  labs(x = """","
"0","      y=""Google search volume"","
"0","      title = ""Google search volume for partisan terms\n  across 2004 election cycle"") +"
"0","  scale_x_date(date_labels = ""%b %Y"")"
